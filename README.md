# 🔬 TH-Research\n\nAI 生成的 HTML 报告存放与分享平台\n\n## ✨ 功能\n\n- **📤 轻松上传** - 上传 AI 生成的 HTML 报告文件\n- **🔗 即时分享** - 自动生成公开网址，分享给他人\n- **🛡️ 安全管理** - 仅您可以管理上传的报告\n- **🔄 灵活控制** - 停用、置换或删除已上传的报告\n- **🔐 密码保护** - 管理界面需要密码认证\n\n## 🚀 快速开始\n\n### 本地开发\n\n```bash\n# 安装依赖\nnpm install\n\n# 创建 .env 文件（参考 .env.example）\ncp .env.example .env\n\n# 填入你的 Supabase 凭证和密码\n\n# 启动开发服务器\nnpm start\n```\n\n访问 `http://localhost:3000`\n\n### 部署到 Railway\n\n详细步骤请参考 [SETUP.md](./SETUP.md) 文件。\n\n## 📋 使用说明\n\n### 访问管理界面\n\n1. 访问 `/manage` 页面\n2. 输入管理密码\n3. 登入后即可：\n   - 上传新报告\n   - 查看所有报告\n   - 复制分享链接\n   - 停用/置换/删除报告\n\n### 分享报告\n\n1. 点击报告的\"📋 复制链接\"按钮\n2. 将链接分享给他人\n3. 其他人可直接打开链接查看报告\n\n## 🛠️ 技术栈\n\n- **后端**: Express.js (Node.js)\n- **数据库**: Supabase (PostgreSQL)\n- **存储**: Supabase Storage\n- **部署**: Railway\n- **前端**: Vanilla HTML/CSS/JavaScript\n\n## 📁 项目结构\n\n```\nTH-Research/\n├── server.js              # Express 服务器\n├── package.json           # 项目依赖\n├── .env.example          # 环境变量模板\n├── SETUP.md              # 详细配置指南\n├── README.md             # 项目说明\n└── public/\n    ├── index.html        # 首页\n    └── manage.html       # 管理界面\n```\n\n## 🔑 环境变量\n\n| 变量名 | 说明 | 示例 |\n|-------|------|------|\n| `PORT` | 服务器端口 | `3000` |\n| `NODE_ENV` | 环境 | `production` |\n| `SUPABASE_URL` | Supabase 项目 URL | `https://xxx.supabase.co` |\n| `SUPABASE_ANON_KEY` | Supabase 匿名密钥 | - |\n| `SUPABASE_SERVICE_KEY` | Supabase 服务角色密钥 | - |\n| `UPLOAD_PASSWORD` | 管理密码 | - |\n| `MAX_FILE_SIZE` | 最大文件大小（字节） | `52428800` |\n| `STORAGE_BUCKET` | 存储桶名称 | `reports` |\n| `APP_URL` | 应用公开 URL | `https://app.railway.app` |\n\n## 📚 API 端点\n\n| 方法 | 端点 | 说明 |\n|------|------|------|\n| `GET` | `/` | 首页 |\n| `GET` | `/manage` | 管理界面 |\n| `POST` | `/api/upload` | 上传文件 |\n| `GET` | `/api/reports` | 获取所有报告（需要认证） |\n| `GET` | `/reports/:reportId` | 查看公开报告 |\n| `DELETE` | `/api/reports/:reportId` | 删除报告（需要认证） |\n| `PATCH` | `/api/reports/:reportId/disable` | 停用报告（需要认证） |\n| `POST` | `/api/reports/:reportId/replace` | 置换报告（需要认证） |\n\n## 🔐 安全\n\n- 管理界面通过密码 (`x-upload-password` header) 保护\n- 只有知道密码的用户才能上传/管理报告\n- 其他人可通过公开链接查看报告\n- 停用的报告无法被访问\n\n## 📝 常见问题\n\n**Q: 如何更改管理密码？**  \nA: 更新 `UPLOAD_PASSWORD` 环境变量并重新部署。\n\n**Q: 报告大小限制？**  \nA: 默认 50MB，可通过 `MAX_FILE_SIZE` 修改。\n\n**Q: 其他人可以上传文件吗？**  \nA: 不可以，只有知道密码的人才能访问管理界面。\n\n**Q: 如何查看错误日志？**  \nA: 在 Railway Dashboard 查看 Logs 标签。\n\n## 📞 支持\n\n详细配置指南：[SETUP.md](./SETUP.md)\n\n## 📄 许可证\n\nMIT\n"